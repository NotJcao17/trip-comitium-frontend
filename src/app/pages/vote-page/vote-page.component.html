<!-- Fondo Ambiental -->
<div class="ambient-light">
    <div class="orb orb-1"></div>
    <div class="orb orb-2"></div>
</div>

<div class="container pt-5 mt-5 pb-5">

    <!-- Botón Volver -->
    <div class="mb-4">
        <a [routerLink]="['/trip', tripCode]" class="btn btn-glass btn-sm text-white rounded-pill px-3">
            <i class="fa-solid fa-arrow-left me-2"></i>Volver al Dashboard
        </a>
    </div>

    <!-- Loading State -->
    <div *ngIf="isLoading" class="text-center text-white py-5">
        <div class="spinner-border text-primary" role="status"></div>
        <p class="mt-3 text-muted">Cargando votación...</p>
    </div>

    <!-- Error State -->
    <div *ngIf="error" class="alert alert-danger bg-danger bg-opacity-10 border-danger text-white">
        <i class="fa-solid fa-triangle-exclamation me-2"></i>{{ error }}
    </div>

    <!-- Contenido Principal -->
    <div *ngIf="poll && !isLoading" class="glass-panel p-4 p-md-5 animate-up mx-auto" style="max-width: 800px;">

        <div class="text-center mb-5">
            <!-- Badge Tipo -->
            <span
                class="badge bg-primary bg-opacity-10 text-primary border border-primary border-opacity-25 mb-3 px-3 py-2 rounded-pill text-uppercase letter-spacing-2">
                {{ poll.type.replace('_', ' ') }}
            </span>

            <!-- Título -->
            <h1 class="fw-bold text-white mb-2">{{ poll.title }}</h1>
            <p class="text-muted">Tu opinión cuenta. Elige sabiamente.</p>
        </div>

        <!-- AQUÍ VA EL CONTENEDOR INTELIGENTE -->
        <app-poll-container [poll]="poll"></app-poll-container>

    </div>
</div>